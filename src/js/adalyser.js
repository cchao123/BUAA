var adalyserModules=trackerCore;adalyserModules.AdalyserTracker=function(e,r){var t=window;mutState={outQueues:[],bufferFlushers:[],expireDateTime:null,hasLoaded:false,registeredOnLoadHandlers:[]};function a(){var e;adalyserModules.helpers.forEach(mutState.bufferFlushers,function(e){e()});if(mutState.expireDateTime){do{e=new Date;if(adalyserModules.helpers.filter(mutState.outQueues,function(e){return e.length>0}).length===0){break}}while(e.getTime()<mutState.expireDateTime)}}t.AdalyserTracker={};adalyserModules.helpers.addEventListener(t,"beforeunload",a,false);return new adalyserModules.InQueueManager(e,mutState,r)};adalyserModules.InQueueManager=function(e,r,t){var a;function n(){if(adalyserModules.isBot(navigator.userAgent)){return}for(var e=0;e<arguments.length;e+=1){var r=arguments[e];var t=Array.prototype.shift.call(r);if(typeof t=="function"){t.apply(r);continue}if(t==="create"){o(r[0]);continue}a[t].apply(a[t],r)}}function o(e){e=e||{};if(!a){a=new adalyserModules.Tracker(t,r,e);a.setSilo("c5.adalyser.com")}else{console.log("Tracker already exists.")}}for(var i=0;i<e.length;i++){n(e[i])}return{push:n}};adalyserModules.OutQueueManager=function(e,r,s,u,o,l,c){var d,f=false,m,y;c=c||false;u=u&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;var i=u?"/tracking/track/v3/x":"/tracking/track/v3/p";o=adalyserModules.detectors.localStorageAccessible()&&s&&u&&o||1;d=["adal_out_queue",e,u?"post":"get"].join("_");if(s){try{y=JSON.parse(localStorage.getItem(d))}catch(n){}}if(!adalyserModules.libs.lodash.isArray(y)){y=[]}r.outQueues.push(y);if(u&&o>1){r.bufferFlushers.push(function(){if(!f){h()}})}if(u&&o>1){r.bufferFlushers.push(function(){if(!f){h()}})}function g(e){var r="?",t={co:true,cx:true},a=true;for(var n in e){if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n)){if(!a){r+="&"}else{a=false}r+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])}}for(var o in t){if(e.hasOwnProperty(o)&&t.hasOwnProperty(o)){r+="&"+o+"="+encodeURIComponent(e[o])}}return r}function p(e){var r=adalyserModules.libs.lodash.mapValues(e,function(e){return e.toString()});return{evt:r,bytes:t(JSON.stringify(r))}}function t(e){var r=0;for(var t=0;t<e.length;t++){var a=e.charCodeAt(t);if(a<=127){r+=1}else if(a<=2047){r+=2}else if(a>=55296&&a<=57343){r+=4;t++}else if(a<65535){r+=3}else{r+=4}}return r}function a(e,r){m=r+i;if(u){var t=p(e);if(t.bytes>=l){adalyserModules.helpers.warn("Event too large: size "+t.bytes+"exceeds maximum of "+l);var a=v(configCollectorUrl);a.send(encloseInPayloadDataEnvelope(w([t.evt])));return}else{y.push(t)}}else{y.push(g(e))}var n=false;if(s){n=adalyserModules.helpers.attemptWriteLocalStorage(d,JSON.stringify(y))}if(!f&&(!n||y.length>=o)){h()}}function h(){while(y.length&&typeof y[0]!=="string"&&typeof y[0]!=="object"){y.shift()}if(y.length<1){f=false;return}if(!adalyserModules.libs.lodash.isString(m)){throw"No silo configured, cannot track"}f=true;var e=y[0];if(u){var r=v(m);var t=setTimeout(function(){r.abort();f=false},5e3);function a(e){var r=0;var t=0;while(r<e.length){t+=e[r].bytes;if(t>=l){break}else{r+=1}}return r}var n=a(y);r.onreadystatechange=function(){if(r.readyState===4&&r.status>=200&&r.status<400){for(var e=0;e<n;e++){y.shift()}if(s){adalyserModules.helpers.attemptWriteLocalStorage(d,JSON.stringify(y))}clearTimeout(t);h()}else if(r.readyState===4&&r.status>=400){clearTimeout(t);f=false}};var o=adalyserModules.libs.lodash.map(y.slice(0,n),function(e){return e.evt});if(o.length>0){r.send(JSON.stringify(w(o)))}}else{var i=new Image(1,1);i.onload=function(){y.shift();if(s){adalyserModules.helpers.attemptWriteLocalStorage(d,JSON.stringify(y))}h()};i.onerror=function(){f=false};if(c){i.src="https://ib.adnxs.com/getuidu?"+m+e.replace("?","?stm="+(new Date).getTime()+"&").replace("APPNEXUS_ID_PLACEHOLDER","$UID")}else{i.src=m+e.replace("?","?stm="+(new Date).getTime()+"&")}}}function v(e){var r=new XMLHttpRequest;r.open("POST",e,true);r.withCredentials=true;r.setRequestHeader("Content-Type","application/json; charset=UTF-8");return r}function w(e){var r=(new Date).getTime().toString();for(var t=0;t<e.length;t++){e[t]["stm"]=r}return e}return{enqueueRequest:a,executeQueue:h}};adalyserModules.Payload=function(e){var r={};r.isJson=function(e){return typeof e!=="undefined"&&e!==null&&(e.constructor==={}.constructor||e.constructor===[].constructor)};r.isNonEmptyJson=function(e){if(!adalyserModules.Payload.isJson(e)){return false}for(var r in e){if(e.hasOwnProperty(r)){return true}}return false};r.payloadBuilder=function(e){var t={};var a=function(e,r){if(r!==undefined&&r!==null&&r!==""){t[e]=r}};var r=function(e){for(var r in e){if(e.hasOwnProperty(r)){a(r,e[r])}}};var n=function(e,r){if(adalyserModules.Payload.isNonEmptyJson(r)){var t=JSON.stringify(r);a(e,t)}};return{add:a,addDict:r,addJson:n,build:function(){return t}}};return r}();function trackerCore(n){var t={};function a(e,r){t[e]=r}function s(e,r,t,a){e.et=t||(new Date).getTime();if(r){e.addJson("co",r)}if(typeof n==="function"){n(e,a)}return e}function e(e,r,t,a){var n=adalyserModules.Payload.payloadBuilder();n.add("e",e);n.eventData=r;return s(n,t,a)}return{addPayloadPair:a,addPayloadDict:function(e){for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}},resetPayloadPairs:function(e){t=payload.isJson(e)?e:{}},setScreenResolution:function(e,r){a("res",e+"x"+r)},setViewport:function(e,r){a("vp",e+"x"+r)},setColorDepth:function(e){a("cd",e)},setTimezone:function(e){a("tz",e)},setLang:function(e){a("lang",e)},setIpAddress:function(e){a("ip",e)},trackPageView:function(e,r,t,a,n){var o=adalyserModules.Payload.payloadBuilder();o.add("e","pv");o.add("url",e);o.add("page",r);o.add("refr",t);return s(o,a,n)},trackSession:function(e,r,t,a,n,o){var i=adalyserModules.Payload.payloadBuilder();i.add("e",e);i.eventData=r;i.add("url",t);i.add("refr",a);return s(i,n,o,"ses")},trackEvent:e}}adalyserModules.helpers=function(){var o={};o.determineDeviceType=function(e){if(e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|Kindle|KFOT|KFTT/i)){return"mobile"}return"desktop"};o.attemptGetLocalStorage=function(e){try{return localStorage.getItem(e)}catch(r){}};o.attemptWriteLocalStorage=function(e,r){try{localStorage.setItem(e,r);return true}catch(t){return false}};o.findRootDomain=function(){var e="__adal";var r=""+(new Date).getTime();var t=window.location.hostname.split(".");var a=t.length-1;while(a>=0){var n=t.slice(a,t.length).join(".");adalyserModules.libs.cookie(e,r,0,"/",n);if(adalyserModules.libs.cookie(e)===r){o.deleteCookie(e,n);return n}a-=1}return window.location.hostname};o.strEndsWith=function(e,r){if(typeof String.prototype.endsWith=="function"){return String.prototype.endsWith.call(e,r)}return e.indexOf(r,e.length-r.length)!==-1};o.getCookiesWithPrefix=function(e){var r=document.cookie.split("; ");var t=[];for(var a=0;a<r.length;a++){if(r[a].substring(0,e.length)===e){t.push(r[a])}}return t};o.deleteCookie=function(e,r){adalyserModules.libs.cookie(e,"",-1,"/",r)};o.getReferrer=function(e){var r="";var t=o.fromQuerystring("referrer",window.location.href)||o.fromQuerystring("referer",window.location.href);if(t){return t}if(e){return e}try{r=window.top.document.referrer}catch(a){if(window.parent){try{r=window.parent.document.referrer}catch(n){r=""}}}if(r===""){r=document.referrer}return r};o.addEventListener=function(e,r,t,a){if(e.addEventListener){e.addEventListener(r,t,a);return true}if(e.attachEvent){return e.attachEvent("on"+r,t)}e["on"+r]=t};o.fromQuerystring=function(e,r){var t=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(r);if(!t){return null}return decodeURIComponent(t[1].replace(/\+/g," "))};o.fixupDomain=function(e){var r=e.length;if(e.charAt(--r)==="."){e=e.slice(0,r)}if(e.slice(0,2)==="*."){e=e.slice(1)}return e};o.decorateQuerystring=function(e,r,t){var a=r+"="+t;var n=e.split("#");var o=n[0].split("?");var i=o.shift();var s=o.join("?");if(!s){s=a}else{var u=true;var l=s.split("&");for(var c=0;c<l.length;c++){if(l[c].substr(0,r.length+1)===r+"="){u=false;l[c]=a;s=l.join("&");break}}if(u){s=a+"&"+s}}n[0]=i+"?"+s;return n.join("#")};function i(e){return Object.prototype.toString.call(e)=="[object Array]"}function e(e){return Object.prototype.toString.call(e)=="[object String]"}function r(e){return e===undefined}function t(e,a,r){var n=-1,t=e?e.length:0,o=Array(typeof t=="number"?t:0);a=l(a,r);if(i(e)){while(++n<t){o[n]=a(e[n],n,e)}}else{c(e,function(e,r,t){o[++n]=a(e,r,t)})}return o}function a(e,a,r){var n={};a=l(a,r);c(e,function(e,r,t){n[r]=a(e,r,t)});return n}function n(e,r,t){var a=i(e)?u:s;r=l(r,t);return a(e,r)}o.filter=n;function s(e,a){var n=[];c(e,function(e,r,t){if(a(e,r,t)){n.push(e)}});return n}function u(e,r){var t=[],a=e.length,n=-1,o=-1;while(++n<a){var i=e[n];if(r(i,n,e)){t[++o]=i}}return t}function l(a,n){if(!a){return identity}if(typeof a!="function"){return function(e){return e[a]}}if(n!==undefined){return function(e,r,t){return a.call(n,e,r,t)}}return a}function c(e,r){for(var t in e){if(e.hasOwnProperty(t)){r.apply(e[t],[e[t],t,e])}}}o.forEach=c;var d={bin:{stringToBytes:function(e){for(var r=[],t=0;t<e.length;t++)r.push(e.charCodeAt(t)&255);return r},bytesToString:function(e){for(var r=[],t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return r.join("")}}};adalyserModules.libs||(adalyserModules.libs={});adalyserModules.libs.lodash={isArray:i,isUndefined:r,isString:e,map:t,mapValues:a};adalyserModules.libs.cookie=function(e,r,t,a,n,o){return 1<arguments.length?document.cookie=e+"="+escape(r)+(t?"; expires="+new Date(+new Date+1e3*t).toUTCString():"")+(a?"; path="+a:"")+(n?"; domain="+n:"")+(o?"; secure":""):unescape((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])};return o}();adalyserModules.detectors=function(e){var t=window,a={};a.hasLocalStorage=function(){try{return!!t.localStorage}catch(e){return true}};a.localStorageAccessible=function(){var e="modernizr";if(!a.hasLocalStorage()){return false}try{t.localStorage.setItem(e,e);t.localStorage.removeItem(e);return true}catch(r){return false}};a.detectTimezone=function(){return""};return a}();(function(){function n(e){var r=new RegExp("^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$");return r.test(e)}function a(e){var r,t;if(n(e)){try{r=document.body.children[0].children[0].children[0].children[0].children[0].children[0].innerHTML;t="You have reached the cached page for";return r.slice(0,t.length)===t}catch(a){return false}}}adalyserModules.isBot=function(e){return/sitecon|phantom|googlebot|mediapartners-google|adsbot-google|slurp|bingbot|adidxbot|msnbot|mj12|bingpreview|baiduspider|aihitbot|pingdom/i.test(navigator.userAgent.toLowerCase())};function o(e,r){var t=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)"),a=t.exec(e);if(a){return adalyserModules.helpers.fromQuerystring(r,a[1])}return null}adalyserModules.fixupUrl=function(e,r,t){if(e==="translate.googleusercontent.com"){if(t===""){t=r}r=o(r,"u");e=adalyserModules.getHostName(r)}else if(e==="cc.bingj.com"||e==="webcache.googleusercontent.com"||a(e)){r=document.links[0].href;e=adalyserModules.getHostName(r)}return[e,r,t]};adalyserModules.getParameter=o;adalyserModules.fixupTitle=function(e){if(!adalyserModules.libs.lodash.isString(e)){e=e.text||"";var r=document.getElementsByTagName("title");if(r&&!adalyserModules.helpers.lodash.isUndefined(r[0])){e=r[0].text}}return e}})();adalyserModules.trafficSource=function(){var t={},k=document,b=window,S=k.domain;t.searchEngines={"^www\\.daum\\.net$":{name:"Daum",queryStrings:["q"]},"^www\\.eniro\\.se$":{name:"Eniro",queryStrings:["search_word"]},"^www\\.naver\\.com$":{name:"Naver",queryStrings:["query"]},"^www\\.google\\..*$":{name:"Google",queryStrings:["q"]},"^images\\.google\\.com$":{name:"Google",queryStrings:["q"]},"^cse\\.google\\..*$":{name:"Google",queryStrings:["q"]},"com.google.android.googlequicksearchbox":{name:"Google",queryStrings:["q"]},"^www\\.yahoo\\.com$":{name:"Yahoo",queryStrings:["p"]},"^www\\.msn\\.com$":{name:"MSN",queryStrings:["q"]},"^www\\.bing\\.com$":{name:"Bing",queryStrings:["q"]},"^www\\.aol\\.com$":{name:"AOL",queryStrings:["query","encquery","q"]},"^www\\.lycos\\.com$":{name:"Lycos",queryStrings:["query"]},"^www\\.ask\\.com$":{name:"Ask",queryStrings:["q"]},"^www\\.altavista\\.com$":{name:"Altavista",queryStrings:["q"]},"^search\\.netscape\\.com$":{name:"Netscape",queryStrings:["query"]},"^www\\.cnn\\.com$":{name:"CNN",queryStrings:["query"]},"^www\\.about\\.com$":{name:"About",queryStrings:["terms"]},"^www\\.mamma\\.com$":{name:"Mamma",queryStrings:["query"]},"^www\\.alltheweb\\.com$":{name:"Alltheweb",queryStrings:["q"]},"^www\\.voila\\.fr$":{name:"Voila",queryStrings:["rdata"]},"^search\\.virgilio\\.it$":{name:"Virgilio",queryStrings:["qs"]},"^www\\.bing\\.com$":{name:"Live",queryStrings:["q"]},"^www\\.baidu\\.com$":{name:"Baidu",queryStrings:["wd"]},"^www\\.alice\\.com$":{name:"Alice",queryStrings:["qs"]},"^www\\.yandex\\.com$":{name:"Yandex",queryStrings:["text"]},"^www\\.najdi\\.org\\.mk$":{name:"Najdi",queryStrings:["q"]},"^www\\.mamma\\.com$":{name:"Mama",queryStrings:["query"]},"^www\\.seznam\\.cz$":{name:"Seznam",queryStrings:["q"]},"^www\\.search\\.com$":{name:"Search",queryStrings:["q"]},"^www\\.wp\\.pl$":{name:"Wirtulana Polska",queryStrings:["szukaj"]},"^online\\.onetcenter\\.org$":{name:"O*NET",queryStrings:["qt"]},"^www\\.szukacz\\.pl$":{name:"Szukacz",queryStrings:["q"]},"^www\\.yam\\.com$":{name:"Yam",queryStrings:["k"]},"^www\\.pchome\\.com$":{name:"PCHome",queryStrings:["q"]},"^www\\.kvasir\\.no$":{name:"Kvasir",queryStrings:["q"]},"^sesam\\.no$":{name:"Sesam",queryStrings:["q"]},"^www\\.ozu\\.es$":{name:"Ozu",queryStrings:["q"]},"^www\\.terra\\.com$":{name:"Terra",queryStrings:["query"]},"^www\\.mynet\\.com$":{name:"Mynet",queryStrings:["q"]},"^www\\.ekolay\\.net$":{name:"Ekolay",queryStrings:["q"]},"^www\\.rambler\\.ru$":{name:"Rambler",queryStrings:["words"]}};t.socialNetworks={"^(.*\\.)?facebook\\.com$":"Facebook","^(.*\\.)?fb\\.me$":"Facebook","^(.*\\.)?twitter\\.com$":"Twitter","^(.*\\.)?linkedin\\.com$":"LinkedIn","^(.*\\.)?lnkd\\.in$":"LinkedIn","^(.*\\.)?pinterest\\.com$":"Pinterest","^(.*\\.)?blogger\\.com$":"Blogger","^(.*\\.)?blogspot\\.com$":"Blogger","^(.*\\.)?weebly\\.com$":"Weebly","^(.*\\.)?livejournal\\.com$":"LiveJournal","^(.*\\.)?plus\\.google\\.com$":"Google+","^(.*\\.)?youtube\\.com$":"YouTube"};t.referrerBlacklist=["^(.*\\.)?securesuite\\.co\\.uk.*$","^(.*\\.)?clicksafe\\.lloydstsb\\.com.*$","^(.*\\.)?arcot.com.*$","^(.*\\.)?barclaycard\\.co\\.uk.*$","^(.*\\.)?paypal\\.co.*$","^(.*\\.)?stripe.com.*$","^(.*\\.)?barclaycard\\.co\\.uk.*$","^(.*\\.)?mycardsecure\\.com.*$","^(.*\\.)?live\\.barclaycardsmartpay\\.com.*$","^(.*\\.)?verifiedbyvisa.barclays\\.co\\.uk.*$","^(.*\\.)?cap\\.attempts\\.securecode\\.com.*$","^(.*\\.)?customer.cc.at.paysafecard.com.*$","^(.*\\.)?acs4\\.3dsecure\\.no.*$","^(.*\\.)?securesuite\\.net.*$","^(.*\\.)?vcas2\\.visa\\.com.*$","^(.*\\.)?acs\\.sia\\.eu.*$","^(.*\\.)?hpp\\.realexpayments\\.com.*$","^(.*\\.)?pay\\.realexpayments\\.com.*$","^(.*\\.)?secure\\.worldpay\\.com.*$","^(.*\\.)?adyen\\.com.*$","^(.*\\.)?securesuite\\.co.*$","^(.*\\.)?3dsecure\\.no.*$","^(.*\\.)?acs2-3dsecure\\.cm-cic\\.com.*$","^(.*\\.)?unitradeprod\\.alipay\\.com.*$","^(.*\\.)?clearpay\\.co\\.uk.*$","^(.*\\.)?pay\\.klarna\\.com.*$","^(.*\\.)?portal\\.afterpay\\.com.*$","^(.*\\.)?zuora\\.com.*$"];function _(e){if(typeof e==="undefined"){return false}for(var r in t.searchEngines){if(e.search(r)>-1){return t.searchEngines[r]}}return false}function M(e){if(typeof e==="undefined"){return false}for(var r in t.socialNetworks){if(e.search(r)>-1){return t.socialNetworks[r]}}return false}function P(e,r){if(e==S){return false}if(typeof e==="undefined"){return false}for(var t in r){if(e.search(r[t])>-1){return false}}return true}function q(e){var r=e.split("&"),t={};for(var a=0;a<r.length;a++){var n=r[a].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}t.getCampaignData=function(e,r,t){var a=S,n=q(b.location.search.substring(1)),o=k.referrer.split("?"),i=o[0],s=i.split("/")[0],u=i.split("/")[2],l;if(o.length==2){l=q(o[1])}var c={};var d,f;var m={setFromPrevious:false};if(n["gclid"]||n["gclsrc"]){c.so="google";c.me="cpc";c.gclid=n["gclid"]}else if(n["utm_source"]){if(t){var y=false;var g=n["utm_source"];for(var p=0;p<t.length;p++){if(g==t[p]){if(g=="facebook"&&"video"!=n["utm_medium"]){break}y=true;break}}m.isClickThrough=y}var h={so:"utm_source",me:"utm_medium",ca:"utm_campaign",co:"utm_content",ke:"utm_term"};adalyserModules.helpers.forEach(h,function(e,r,t){if(n[e]){c[r]=n[e]}else{c[r]="(not set)"}})}else if((d=_(u))!==false){c.so=d.name;c.me="organic";c.ca="(not set)";c.co="(not set)";c.ke="(not set)";if("https:"!=s&&typeof l!="undefined"){for(var v=0;v<d.queryStrings.length;v++){var w=l[d.queryStrings[v]];if(typeof w!="undefined"){c.ke=w}}}}else if((f=M(u))!==false){c.so=f;c.me="social";c.ca="(not set)";c.co="(not set)";c.ke="(not set)"}else if(P(u,r)){c.so=u;c.me="referral";c.ca="referral";c.co=i;c.ke="(not set)"}if(typeof c.so=="undefined"){if(e){c=e;m["setFromPrevious"]=true}else{c.so="direct";c.me="none";c.ca="direct";c.co="(not set)";c.ke="(not set)"}}m["campaignParams"]=c;return m};t.getChannelGrouping=function(e,r,t,a){var n=e.so,o=e.me;if(!n||!o){return"Unknown"}if(o=="organic"){return"Organic"}if(o=="referral"){return"Referral"}if(o=="email"){return"Email"}if(n=="direct"&&/^(\(not set\)|none)$/.test(o)){return"Direct"}if(/^(cpc|ppc|paidsearch)$/.test(o)){if(r){var i=q(b.location.search.substring(1));for(var s in r){var u=r[s];if(i[s]){for(var l in u){if(i[s].search(u[l])>-1){return"Paid Search (Brand)"}}}}return"Paid Search (Generic)"}else if(t){var i=q(b.location.search.substring(1));if(i[t]){for(var l in a){if(i[t].search(a[l])>-1){return"Paid Search (Brand)"}}}return"Paid Search (Generic)"}return"Paid Search"}if(/^(cpv|cpa|cpp|content-text)$/.test(o)){return"Other Advertising"}if(/^(social|social-network|social-media|sm|social network|social media)$/.test(o)){return"Social"}if(/^(display|cpm|banner)$/.test(o)){return"Display"}return"Unknown"};return t}();adalyserModules.Tracker=function(w,a,e){var S=e.hasOwnProperty("clientId")?e.clientId:0,r={68856412500:{campaignCookieTimeout:1209600}};if(S&&r.hasOwnProperty(S)){var t=r[S];for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}}var o=adalyserModules(function(e,r){Ae(e);for(var t in p){e.eventData[t]=p[t]}if(r=="ses"){if(x){var a=I();if(!a){Pe(e.et)}ye(e,d)}x=false}else{ye(e,d)}}),u=document,i=window,_=navigator,s=adalyserModules.fixupUrl(u.domain,i.location.href,adalyserModules.helpers.getReferrer()),M=adalyserModules.helpers.fixupDomain(s[0]),P=s[1],q=s[2],l,c=u.title,d=e.hasOwnProperty("pageUnloadTimer")?e.pageUnloadTimer:500,k,b="_adal_",f=e.hasOwnProperty("cookieDomain")?e.cookieDomain:null,m="/",U,B=e.hasOwnProperty("visitorCookieTimeout")?e.visitorCookieTimeout:63072e3,j=e.hasOwnProperty("campaignCookieTimeout")?e.campaignCookieTimeout:15552e3,z=e.hasOwnProperty("viewThroughCookieTimeout")?e.viewThroughCookieTimeout:2592e3,Q=e.hasOwnProperty("conversionCookieTimeout")?e.conversionCookieTimeout:2592e3,J=e.hasOwnProperty("useLandingPageCookie")?e.useLandingPageCookie===true:false,H=e.hasOwnProperty("landingPageCookieTimeout")?e.landingPageCookieTimeout:2592e3,$=e.hasOwnProperty("sessionCookieTimeout")?e.sessionCookieTimeout:1800,F=adalyserModules.trafficSource.referrerBlacklist.concat(e.hasOwnProperty("trafficSourceInternalReferrers")?e.trafficSourceInternalReferrers:[]),G=u.characterSet||u.charset,V=e.hasOwnProperty("forceSecureTracker")?e.forceSecureTracker===true:false,W=e.hasOwnProperty("useLocalStorage")?e.useLocalStorage:true,X=e.hasOwnProperty("vodUtmSources")?e.vodUtmSources:[],T=e.hasOwnProperty("useCookies")?e.useCookies:true,Y=_.userLanguage||_.language,K,Z=(new Date).getTime(),y,C,D=1,x=false,g=[],ee=e.hasOwnProperty("useLinkerParams")?e.useLinkerParams:false,re=e.hasOwnProperty("linkerExpirationThreshold")?e.linkerExpirationThreshold:12e4,te=e.hasOwnProperty("brandGenericProp")?e.brandGenericProp:false,ae=e.hasOwnProperty("brandPatterns")?e.brandPatterns:[],ne=e.hasOwnProperty("brandMap")?e.brandMap:false,oe=e.hasOwnProperty("anonymiseIP")?e.anonymiseIP:false,E=e.hasOwnProperty("appNexusIdParameter")?e.appNexusIdParameter:false,p={};if(E){p[E]="APPNEXUS_ID_PLACEHOLDER"}outQueueManager=new adalyserModules.OutQueueManager(w,a,W,e.post,e.bufferSize,e.maxPostBytes||4e4,E),commonContexts=[];if(!e.hasOwnProperty("discoverRootDomain")||e.discoverRootDomain){f=adalyserModules.helpers.findRootDomain()}o.setTimezone(adalyserModules.detectors.detectTimezone());o.addPayloadPair("lang",Y);o.addPayloadPair("cs",G);function ie(e){var r=I();var t=(new Date).getTime();if(this.href){this.href=adalyserModules.helpers.decorateQuerystring(this.href,"_adal_cw",r+"."+t);var a=N();if(a){var n=v({cg:a.cg});this.href=adalyserModules.helpers.decorateQuerystring(this.href,"_adal_ca",encodeURIComponent(n)+"."+t)}}}function se(e){if(this.action){var r=I();var t=(new Date).getTime();if("post"==this.method.toLowerCase()){this.action=adalyserModules.helpers.decorateQuerystring(this.action,"_adal_cw",r+"."+t);var a=N();if(a){var n=v({cg:a.cg});this.action=adalyserModules.helpers.decorateQuerystring(this.action,"_adal_ca",n+"."+t)}}else if("get"==this.method.toLowerCase()){var o,i;for(var s=0;s<this.childNodes.length;s++){if("_adal_cw"==this.childNodes[s].name){o=this.childNodes[s]}else if("_adal_ca"==this.childNodes[s].name){i=this.childNodes[s]}}if(!o){o=u.createElement("input");o.setAttribute("type","hidden");o.setAttribute("name","_adal_cw");this.appendChild(o)}o.setAttribute("value",r+"."+t);var a=N();var n=v({cg:a.cg});if(a){if(!i){i=u.createElement("input");i.setAttribute("type","hidden");i.setAttribute("name","_adal_ca");this.appendChild(i)}i.setAttribute("value",n+"."+t)}}}}function ue(e){return function(){ie.call(e)}}function le(e){return function(){se.call(e)}}function ce(o,i){if(typeof o=="function"){return o}else if(adalyserModules.libs.lodash.isArray(o)){var s=new RegExp(/^https?:\/\/([^\/:]+)/);return function(e){var r=e[i],t=r.match(s),a;if(t){a=t[1]}if(!a||a==u.location.hostname){return false}for(var n=0;n<o.length;n++){if(o[n]instanceof RegExp){if(o[n].test(a))return true}else if(a.indexOf(o[n])>=0){return true}}return false}}}function de(e){var r=ce(e,"href");for(var t=0;t<document.links.length;t++){var a=document.links[t];if(!a.adalDecorationEnabled&&r(a)){adalyserModules.helpers.addEventListener(a,"click",ue(a));adalyserModules.helpers.addEventListener(a,"mousedown",ue(a));a.adalDecorationEnabled=true}}}function fe(e){var r=ce(e,"action");for(var t=0;t<document.forms.length;t++){var a=document.forms[t];if(!a.adalDecorationEnabled&&r(a)){adalyserModules.helpers.addEventListener(a,"submit",le(a));a.adalDecorationEnabled=true}}}function me(e){var r=adalyserModules.getParameter(e,"_adal_cw");if(r){var t=r.split(".");var a=t.pop();if((new Date).getTime()-parseInt(a)<re){L();Pe(t.join("."))}}var n=adalyserModules.getParameter(e,"_adal_ca");if(n){var o=n.split(".");var i=o.pop();if((new Date).getTime()-parseInt(i)<re){L();var s=h(o.join("."));if("Direct"===s["cg"]){s.so="direct";s.me="none"}R(s)}}}function ye(e,r){var t=new Date;outQueueManager.enqueueRequest(e.build(),l);a.expireDateTime=t.getTime()+r}function O(e){var r;r=new RegExp("#.*");return e.replace(r,"")}function A(){s=adalyserModules.fixupUrl(u.domain,i.location.href,adalyserModules.helpers.getReferrer());if(s[1]!==P){q=adalyserModules.helpers.getReferrer(P)}M=adalyserModules.helpers.fixupDomain(s[0]);P=s[1]}function ge(e){var r,t,a=["","webkit","ms","moz"],n;if(!U){for(t=0;t<a.length;t++){n=a[t];if(u[be(n,"hidden")]){if(u[be(n,"visibilityState")]==="prerender"){r=true}break}}}if(r){adalyserModules.helpers.addEventListener(u,n+"visibilitychange",function o(){u.removeEventListener(n+"visibilitychange",o,false);e()});return}e()}function pe(e){return commonContexts.concat(e||[])}function he(e,r){return(e||[]).concat(r?r():[])}function ve(e,r,t){A();c=u.title;lastConfigTitle=e;var a=adalyserModules.fixupTitle(lastConfigTitle||c);o.trackPageView(O(P),a,O(q),pe(he(r,t)))}function we(e,r,t,a){A();o.trackSession(e,r,O(P),O(q),pe(he(t,a)))}function ke(){if(!geolocationContextAdded&&_.geolocation&&_.geolocation.getCurrentPosition){geolocationContextAdded=true;navigator.geolocation.getCurrentPosition(function(e){var r=e.coords;var t={latitude:r.latitude,longitude:r.longitude,latitudeLongitudeAccuracy:r.accuracy,altitude:r.altitude,altitudeAccuracy:r.altitudeAccuracy,bearing:r.heading,speed:r.speed,timestamp:e.timestamp};commonContexts.push(t)})}}function be(e,r){if(e!==""){return e+r.charAt(0).toUpperCase()+r.slice(1)}return r}function L(){if(g.length>0){adalyserModules.libs.cookie("__adal_ses",g.join("_"),$,m,f)}else{adalyserModules.libs.cookie("__adal_ses","*",$,m,f)}}function Se(e,r,t,a,n,o){adalyserModules.libs.cookie("__adal_id",e+"."+r+"."+t+"."+a+"."+n+"."+o,B,m,f)}function N(){var e=adalyserModules.libs.cookie("__adal_ca");if(!e){return null}return h(e)}function _e(){var e=adalyserModules.libs.cookie("__adal_vt");if(!e){return null}return h(e)}function h(e){var r={},t=e.split("&");for(var a=0;a<t.length;a++){var n=t[a].split("=");if(n.length>1){r[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}}if(!adalyserModules.Payload.isNonEmptyJson(r)){return null}return r}function R(e){adalyserModules.libs.cookie("__adal_ca",v(e),j,m,f)}function Me(e){adalyserModules.libs.cookie("__adal_vt",v(e),z,m,f)}function v(e){var r="",t=true;for(var a in e){if(e.hasOwnProperty(a)){if(!t){r+="&"}else{t=false}r+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])}}return r}function I(){return adalyserModules.libs.cookie("__adal_cw")}function Pe(e){adalyserModules.libs.cookie("__adal_cw",e,Q,m,f)}function qe(){return adalyserModules.libs.cookie("__adal_lp")}function $e(e){adalyserModules.libs.cookie("__adal_lp",e,H,m,f)}function Te(e){adalyserModules.libs.cookie("__adal_sd",e,Q,m,f)}function Ce(){return adalyserModules.libs.cookie("__adal_sd")}function De(){return uuid.v4()}function xe(){var e=T&&Ee();var r=Oe();if(r[1]){y=r[1]}else{y=De();r[1]=y}C=r[6];if(e){g=e[0]}else{r[3]++;x=true;C=uuid.v4();r[6]=C;r[5]=r[4]}if(T){L();if(J){var t=qe();if(!t){$e(P)}}r[4]=Math.round((new Date).getTime()/1e3);r.shift();Se.apply(null,r)}}function Ee(){var e=adalyserModules.libs.cookie("__adal_ses"),r=[];if(!e){return false}if(e=="*"){r[0]=[]}else{r=e.split(".");if(r[0]){r[0]=r[0].split("_")}}return r}function Oe(){if(!T){return[]}var e=new Date,r=Math.round(e.getTime()/1e3),t=adalyserModules.libs.cookie("__adal_id"),a;if(t){a=t.split(".");a.unshift("0")}else{a=["1",y,r,0,r,""]}if(!a[6]){a[6]=uuid.v4()}return a}function Ae(e){var r=Math.round((new Date).getTime()/1e3),t="__adal_id",a=Ee(),n=Oe(),o=n[0],i=n[1],s=n[2],u=n[3],l=n[4],c=n[5],d=n[6];var f=N();var m={};var y=_e();var g=adalyserModules.trafficSource.getCampaignData(f,F,X);var p=g.campaignParams;var h=false;if(!g.setFromPrevious||typeof p["cg"]==="undefined"){p["cg"]=adalyserModules.trafficSource.getChannelGrouping(p,ne,te,ae)}if(p.so!=="direct"){if(f){adalyserModules.helpers.forEach(p,function(e,r,t){if(e!==f[r]){h=true}});adalyserModules.helpers.forEach(f,function(e,r,t){if(e!==p[r]){h=true}})}else{h=true}if(!g.setFromPrevious){R(p)}}else{if(!f){R(p)}}var v=e.eventData;if(adalyserModules.libs.lodash.isUndefined(v)){v={}}v["et"]=e.et;if(u>1){v["nr"]="Returning"}else{v["nr"]="New"}v["cg"]=p["cg"];v["dt"]=adalyserModules.helpers.determineDeviceType(_.userAgent);adalyserModules.helpers.forEach(p,function(e,r,t){v[r]=e});if(g.isClickThrough){m=p;m["ctt"]=e.et;Me(m)}else{m=y}if(m){adalyserModules.helpers.forEach(m,function(e,r,t){v["vt_"+r]=e})}if(o==="0"){C=d;if(!a&&T||h){u++;c=l;C=uuid.v4();x=true}D=u}else{if((new Date).getTime()-Z>$*1e3){C=uuid.v4();D++;x=true}}if(oe){v["aip"]=1}var w=Ce();if(w!=""){v["sd"]=w}v["vid"]=D;v["sid"]=C;v["duid"]=i;A();var k=I();if(k){v["cw"]=parseInt(k)}else{v["cw"]=e.et}if(J){var b=qe();if(b){v["lp"]=b}}e.add("cid",S);if(E){v[E]="APPNEXUS_ID_PLACEHOLDER"}e.addJson("p",v);e.add("userAgent",_.userAgent);e.add("domain",M);e.add("url",O(P));e.add("refr",O(q));if(T){Se(i,s,D,r,c,C);L()}Z=(new Date).getTime()}function Le(e){if(V){return"https"+"://"+e}return("https:"===u.location.protocol?"https":"http")+"://"+e}if(e.crossDomainLinker){de(e.crossDomainLinker);if(e.decorateForms){fe(e.crossDomainLinker)}}if(ee){me(s[1])}xe();return{setCountPreRendered:function(e){U=e},setSilo:function(e){l=Le(e)},trackPageView:function(e,r,t){ge(function(){ve(e,r,t)})},trackEvent:function(e,r,t){if(t){if(g.indexOf(e)>-1){return}g.push(e)}o.trackEvent(e,r)},trackSession:function(e,r,t,a){we(e,r,t,a)}}};var rng,crypto=window.crypto||window.msCrypto;if(crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var e,r=0;r<16;r++)0===(3&r)&&(e=4294967296*Math.random()),_rnds[r]=e>>>((3&r)<<3)&255;return _rnds}}function parse(e,r,t){var a=r&&t||0,n=0;for(r=r||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){n<16&&(r[a+n++]=_hexToByte[e])});n<16;)r[a+n++]=0;return r}function unparse(e,r){var t=r||0,a=_byteToHex;return a[e[t++]]+a[e[t++]]+a[e[t++]]+a[e[t++]]+"-"+a[e[t++]]+a[e[t++]]+"-"+a[e[t++]]+a[e[t++]]+"-"+a[e[t++]]+a[e[t++]]+"-"+a[e[t++]]+a[e[t++]]+a[e[t++]]+a[e[t++]]+a[e[t++]]+a[e[t++]]}function v1(e,r,t){var a=r&&t||0,n=r||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:_clockseq,i=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,u=i-_lastMSecs+(s-_lastNSecs)/1e4;if(u<0&&void 0===e.clockseq&&(o=o+1&16383),(u<0||i>_lastMSecs)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=i,_lastNSecs=s,_clockseq=o,i+=122192928e5;var l=(1e4*(268435455&i)+s)%4294967296;n[a++]=l>>>24&255,n[a++]=l>>>16&255,n[a++]=l>>>8&255,n[a++]=255&l;var c=i/4294967296*1e4&268435455;n[a++]=c>>>8&255,n[a++]=255&c,n[a++]=c>>>24&15|16,n[a++]=c>>>16&255,n[a++]=o>>>8|128,n[a++]=255&o;for(var d=e.node||_nodeId,f=0;f<6;f++)n[a+f]=d[f];return r?r:unparse(n)}function v4(e,r,t){var a=r&&t||0;"string"==typeof e&&(r="binary"==e?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||rng)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r)for(var o=0;o<16;o++)r[a+o]=n[o];return r||unparse(n)}for(var _byteToHex=[],_hexToByte={},i=0;i<256;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse;var queueName=window.GlobalAdalyserNamespace.shift();var queue=window[queueName];queue.q=new adalyserModules.AdalyserTracker(queue.q,queueName);
